(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16ca0f98"],{"0659":function(e,t,a){"use strict";a("5190")},3470:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"import-wrapper"},[a("el-form",{attrs:{model:e.formData,"label-width":"100px",inline:""}},[a("el-form-item",{attrs:{label:"项目"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",clearable:""},on:{change:e.handleSearch},model:{value:e.formData.project,callback:function(t){e.$set(e.formData,"project",t)},expression:"formData.project"}},e._l(e.sourceData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.artifaceName,value:e.artifaceName}})})),1)],1),a("el-form-item",{attrs:{label:"方案号"}},[a("el-select",{attrs:{clearable:""},on:{change:e.handleChangeName},model:{value:e.formData.schemeNo,callback:function(t){e.$set(e.formData,"schemeNo",t)},expression:"formData.schemeNo"}},e._l(e.schemeList,(function(e,t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd"},on:{change:e.handleChangeName},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1),a("el-form-item",[a("upload-excel-vue",{on:{success:e.handleSuccess}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,border:"",height:"calc(100vh - 180px)"}},[a("el-table-column",{attrs:{label:"No",type:"index",width:"55"}}),a("el-table-column",{attrs:{label:"子类别名称",prop:"sectionName",width:"140"}}),a("el-table-column",{attrs:{label:"目录名称",prop:"artifaceName",width:"140"}}),a("el-table-column",{attrs:{label:"文件名",prop:"docmentName",width:"160"}}),a("el-table-column",{attrs:{label:"自定义名称",prop:"customName"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;t.$index;return[a("div",{staticClass:"custom-name custom-desc"},[e._v(e._s(l.customName))]),a("el-input",{staticClass:"custom-name",attrs:{type:"textarea"},model:{value:l.customName,callback:function(t){e.$set(l,"customName",t)},expression:"row.customName"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;t.$index;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleCopy(l.customName,t)}}},[e._v("复制")]),a("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,action:"","http-request":function(t){return e.handleUpload(t,l)}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)]}}])})],1),a("el-dialog",{attrs:{visible:e.visible,title:"自定义添加",width:"500px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{attrs:{model:e.editForm}},[a("el-form-item",{attrs:{label:"子类别名称",porp:""}},[a("el-select",{attrs:{clearable:""},model:{value:e.editForm.sectionName,callback:function(t){e.$set(e.editForm,"sectionName",t)},expression:"editForm.sectionName"}},e._l(e.sourceData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.sectionName,value:e.sectionName}})})),1)],1),a("el-form-item",{attrs:{label:"目录名称",porp:""}},[a("el-select",{attrs:{clearable:""},model:{value:e.editForm.artifaceName,callback:function(t){e.$set(e.editForm,"artifaceName",t)},expression:"editForm.artifaceName"}},e._l(e.sourceData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.artifaceName,value:e.artifaceName}})})),1)],1),a("el-form-item",{attrs:{label:"文件夹名称",porp:""}},[a("el-select",{attrs:{clearable:""},model:{value:e.editForm.docmentName,callback:function(t){e.$set(e.editForm,"docmentName",t)},expression:"editForm.docmentName"}},e._l(e.sourceData,(function(e,t){return a("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e.docmentName,value:e.docmentName}})})),1)],1),a("el-form-item",{attrs:{label:"自定义名称",porp:""}},[a("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1)],1),a("template",{slot:"footer"},[a("el-button",{attrs:{type:"default"}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("添加")])],1)],2)],1)},n=[],i=a("5530"),o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("d81d"),a("b0c0"),a("99af"),a("e9c4"),a("4de4"),a("ac1f"),a("1276"),a("3796")),r=a("ed08"),s=a("f71e"),c=a("b893"),m={components:{UploadExcelVue:o["a"]},data:function(){return{loading:!1,isEdit:-1,editContent:"",visible:!1,editForm:{},tableData:[],sourceData:[],projectList:[],formData:{schemeNo:"",site:"",date:null},siteList:{},schemeList:{ZGJAK018:"Site16","CBP-201-CN002":"Site38","LBL-007-CN-002":"Site02","CAN008-G-202":"Site09","JSPL-PL-5-301":"Site31",APCKD001:"Site14",LK001202:"Site21"}}},created:function(){this.handleInit()},methods:{handleInit:function(){for(var e=1;e<=50;e++){var t=e;e<10&&(t="0"+e);var a="Site"+t;this.siteList[a]=a}},handleUpload:function(e,t){var a=URL.createObjectURL(e.file);c["a"].download(a,t.customName)},handleChangeName:function(){var e=this;this.tableData=this.tableData.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{customName:e.handleFormatName(t.rename)})}))},handleEdit:function(e,t){this.editContent=this.handleFormatName(e.rename),this.isEdit=t},handleSaveEdit:function(e,t){this.isEdit=-1},handleConfirm:function(){this.editForm.rename=this.handleFormatName(this.editForm.name),this.tableData=[this.editForm].concat(this.tableData),this.visible=!1},handleAdd:function(){this.visible=!0},handleCopy:function(e,t){Object(s["a"])(e,t)},handleFormatName:function(e){var t=this.formData.schemeNo||"",a=this.schemeList[t]||"";return t+"_"+a+"_"+e+"_"+this.handleDate(this.formData.date)},handleSearch:function(e){e?(this.tableData=this.sourceData.filter((function(t){return t["artifaceName"]===e})),this.handleChangeName()):(this.tableData=JSON.parse(JSON.stringify(this.sourceData)),this.handleChangeName())},handleSuccess:function(e){this.sourceData=e.results.map((function(e){var t=e["Artifact name\r\n目录名称"].split("\r\n");return e["sectionName"]=e["Section Name\r\n子类别名称"],e["docmentName"]=e["Document Name\r\n文件名"],e["artifaceName"]=e["Artifact name\r\n目录名称"],e["rename"]=t[t.length-1],e["customName"]=t[t.length-1],e})),this.tableData=JSON.parse(JSON.stringify(this.sourceData)),this.handleChangeName()},handleDate:function(e){return Object(r["f"])(e,"yyyyMMdd")}}},d=m,u=(a("0659"),a("2877")),f=Object(u["a"])(d,l,n,!1,null,null,null);t["default"]=f.exports},5190:function(e,t,a){}}]);